import{e as L,f as h,u as F,s as E,a as e,r as o,g as I,h as q,i as C,j as u,F as v,L as U,k as $,l as j,B as W,m as N,n as k}from"./index-aa74b2b7.js";import{S as B}from"./SectionTitle-4eb10dd0.js";import{C as D}from"./Card-921f6cb5.js";const z=(t,a,s)=>L(h,t,a).then(r=>{const i=h.currentUser;return i&&F(i,{displayName:s}),{userCredential:r}}).catch(r=>(console.log(r),{error:r})),T=(t,a)=>E(h,t,a).then(s=>({userCredential:s})).catch(s=>(console.log(s),{error:s})),d=({className:t,...a})=>e("input",{className:`w-full px-3 py-2 mb-4 leading-tight border-2 rounded shadow appearance-none focus:outline-none focus:shadow-outline ${t}`,...a}),G=()=>{const[t,a]=o.useState(""),[s,r]=o.useState(""),[i,g]=o.useState(""),[P,p]=o.useState(""),[S,c]=o.useState(!1),[b,y]=o.useState(!1),[A]=I(),n=A.get("mode")==="login",x=q(),w=C();return u(v,{children:[S&&e(U,{className:"mx-auto"}),e(B,{size:"large",style:" w-auto mx-auto",children:`${n?"Log In":"Create a new user"}`}),u($,{onSubmit:async l=>{if(l.preventDefault(),n){if(n){c(!0);const{userCredential:m,error:f}=await T(t,s);c(!1),m&&(x(N.login(m.user.displayName)),w("../profil")),f&&(a(""),r(""),y(!0))}}else{c(!0);const{userCredential:m,error:f}=await z(t,s,i);c(!1),m&&(x(N.login(i)),w("../profil")),f&&(g(""),a(""),r(""),p(""))}a(""),r("")},className:"flex flex-col sm:mt-6 w-full sm:w-80 mx-auto",children:[n?null:u("div",{className:" flex flex-col items-start text-sm",children:[e("label",{htmlFor:"fname",children:"Name:"}),e(d,{type:"text",id:"fname",value:i,onChange:l=>g(l.target.value),required:!0})]}),u("div",{className:" flex flex-col items-start text-sm",children:[e("label",{htmlFor:"email",children:"Email:"}),e(d,{type:"email",id:"email",value:t,onChange:l=>a(l.target.value),required:!0})]}),u("div",{className:" flex flex-col items-start text-sm",children:[e("label",{htmlFor:"password",children:"Password:"}),e(d,{type:"password",id:"password",value:s,onChange:l=>r(l.target.value),required:!0})]}),n?null:u("div",{className:" flex flex-col items-start text-sm",children:[e("label",{htmlFor:"confirmPassword",children:"Confirm password:"}),e(d,{type:"password",id:"confirmPassword",value:P,onChange:l=>p(l.target.value),required:!0})]}),b&&e("div",{className:"flex text-sm text-red-600 -mt-4 mb-2",children:"Wrong e-mail or password!"}),e("div",{className:"flex mb-4 ",children:e(j,{className:" text-sm -mt-2 text-green-300 hover:text-green-400",to:`?mode=${n?"signup":"login"}`,children:n?e(v,{children:"Need accout?"}):"Login"})}),e(W,{type:"submit",border:!0,className:" mx-auto w-full sm:w-80",children:n?"Login":"Create new user"})]})]})},O=()=>{const t=k(s=>s.auth.isAuthenticated),a=C();return o.useEffect(()=>{t&&a("../profil")},[t]),e(D,{style:" w-full flex flex-col",children:e(G,{})})};export{O as default};
